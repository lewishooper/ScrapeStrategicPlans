try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e5907a88-c8a7-4d2b-9fb7-9cb311a9fcf1",e._sentryDebugIdIdentifier="sentry-dbid-e5907a88-c8a7-4d2b-9fb7-9cb311a9fcf1")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[19354],{0x6520adcb:(e,t,n)=>{n.d(t,{Ko:()=>s,SV:()=>p,Uq:()=>r,_s:()=>o,gq:()=>d,qs:()=>l,t6:()=>c});var a=n(0x156c4e43b);let o=a.Ik({channel:a.k5(["request","response"]),requestId:a.Yj()}).passthrough(),r=o.strict().extend({channel:a.eu("request"),method:a.Yj(),payload:a.re({"@type":a.Yj()})}),s=o.extend({channel:a.eu("response"),status:a.ai().int().min(100).max(599),payload:a.re({"@type":a.Yj()}).passthrough()}).passthrough(),c=s.extend({status:a.ai().int().min(400).max(599),payload:a.re({"@type":a.eu("type.googleapis.com/anthropic.claude.usercontent.ErrorResponse"),error:a.Yj()})}),d=s.extend({payload:a.re({"@type":a.eu("type.googleapis.com/google.protobuf.Empty")})}),l={"@type":"type.googleapis.com/google.protobuf.Empty"},p=e=>({"@type":"type.googleapis.com/anthropic.claude.usercontent.ErrorResponse",error:e})},0x1137a9c1a:(e,t,n)=>{n.d(t,{K_:()=>g,Ub:()=>h,tH:()=>f,uZ:()=>s,v9:()=>b,x8:()=>y,zN:()=>m});var a=n(0x24fcf6beb),o=n(0x156c4e43b),r=n(0x6520adcb),s=function(e){return e.ReadyForContent="anthropic.claude.usercontent.sandbox.ReadyForContent",e.SetContent="anthropic.claude.usercontent.sandbox.SetContent",e.GetFile="anthropic.claude.usercontent.sandbox.GetFile",e.SendConversationMessage="anthropic.claude.usercontent.sandbox.SendConversationMessage",e.RunCode="anthropic.claude.usercontent.sandbox.RunCode",e.ClaudeCompletion="anthropic.claude.usercontent.sandbox.ClaudeCompletion",e.ReportError="anthropic.claude.usercontent.sandbox.ReportError",e.GetScreenshot="anthropic.claude.usercontent.sandbox.GetScreenshot",e.BroadcastContentSize="anthropic.claude.usercontent.sandbox.BroadcastContentSize",e.OpenExternal="anthropic.claude.usercontent.sandbox.OpenExternal",e.DownloadFile="anthropic.claude.usercontent.sandbox.DownloadFile",e.CopyHtmlContent="anthropic.claude.usercontent.sandbox.CopyHtmlContent",e.TrackInteraction="anthropic.claude.usercontent.sandbox.TrackInteraction",e.ProxyFetch="anthropic.claude.usercontent.sandbox.ProxyFetch",e.ProxyFetchStream="anthropic.claude.usercontent.sandbox.ProxyFetchStream",e.GetDOMSnapshot="anthropic.claude.usercontent.sandbox.GetDOMSnapshot",e.DOMContentLoaded="anthropic.claude.usercontent.sandbox.DOMContentLoaded",e.StorageGet="anthropic.claude.usercontent.sandbox.StorageGet",e.StorageSet="anthropic.claude.usercontent.sandbox.StorageSet",e.StorageDelete="anthropic.claude.usercontent.sandbox.StorageDelete",e.StorageList="anthropic.claude.usercontent.sandbox.StorageList",e}({});let c=o.Ik({type:o.eu("UnsupportedImports"),unsupportedModules:o.YO(o.Yj()),nonExistentIcons:o.YO(o.Yj())}),d=o.Ik({type:o.eu("RuntimeError"),message:o.Yj()}),l=o.Ik({type:o.eu("FileNotFound"),fileName:o.Yj()}),p=o.Ik({type:o.eu("ClaudeCompletionError"),message:o.Yj()}),i=o.Ik({type:o.eu("ArtifactStorageError"),message:o.Yj()}),u=o.gM("type",[c,d,l,p,i]),m=o.Ik({code:o.Yj()}),h=o.Ik({status:o.k5(["success","error"]),result:o.Yj().optional(),logs:o.YO(o.Yj()),error:o.Yj().optional()}),x={"anthropic.claude.usercontent.sandbox.CopyHtmlContent":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.CopyHtmlContent"),payload:o.re({"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.CopyHtmlContentRequest")})}),responseSchema:r.Ko.extend({payload:o.re({"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.CopyHtmlContentResponse"),reportHTMLContent:o.Yj()})}),alwaysPermitted:!1},"anthropic.claude.usercontent.sandbox.SetContent":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.SetContent"),payload:o.gM("type",[o.re({"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.SandboxContent"),content:o.Yj(),type:o.fc(a.vU),watchContentSize:o.zM().optional(),tailwindStylesEnabled:o.zM().optional()}),o.re({"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.SandboxContent"),content:o.KC([o.Yj(),o.Nl(ArrayBuffer)]),type:o.fc(a.qK),watchContentSize:o.zM().optional(),tailwindStylesEnabled:o.zM().optional()})])}),responseSchema:r.gq,alwaysPermitted:!1},"anthropic.claude.usercontent.sandbox.ReadyForContent":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.ReadyForContent"),payload:o.re({"@type":o.eu("type.googleapis.com/google.protobuf.Empty")})}),responseSchema:r.gq,alwaysPermitted:!0},"anthropic.claude.usercontent.sandbox.BroadcastContentSize":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.BroadcastContentSize"),payload:o.re({"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.BroadcastContentSizePayload"),height:o.ai(),width:o.ai()})}),responseSchema:r.gq,alwaysPermitted:!1},"anthropic.claude.usercontent.sandbox.GetFile":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.GetFile"),payload:o.re({key:o.Yj(),"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.GetFileRequest")})}),responseSchema:r.Ko.extend({payload:o.re({value:o.Nl(Uint8Array).nullable(),"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.GetFileResponse")})}),alwaysPermitted:!1},"anthropic.claude.usercontent.sandbox.SendConversationMessage":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.SendConversationMessage"),payload:o.re({message:o.Yj(),messageType:o.k5(["text","error"]),"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.SendConversationMessageRequest")})}),responseSchema:r.gq,alwaysPermitted:!1},"anthropic.claude.usercontent.sandbox.RunCode":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.RunCode"),payload:o.re({code:o.Yj(),"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.RunCodeRequest")})}),responseSchema:r.Ko.extend({payload:o.re({"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.RunCodeResponse")}).merge(h)}),alwaysPermitted:!1},"anthropic.claude.usercontent.sandbox.ClaudeCompletion":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.ClaudeCompletion"),payload:o.re({prompt:o.Yj(),"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.ClaudeCompletionRequest")})}),responseSchema:r.Ko.extend({payload:o.re({completion:o.Yj().nullable(),"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.ClaudeCompletionResponse")})}),alwaysPermitted:!1},"anthropic.claude.usercontent.sandbox.ReportError":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.ReportError"),payload:o.re({"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.ReportErrorRequest"),error:u})}),responseSchema:r.gq,alwaysPermitted:!0},"anthropic.claude.usercontent.sandbox.GetScreenshot":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.GetScreenshot"),payload:o.re({"@type":o.eu("type.googleapis.com/google.protobuf.Empty")})}),responseSchema:r.Ko.extend({payload:o.re({screenshot:o.Yj().nullable(),"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.GetScreenshotResponse")})}),alwaysPermitted:!1},"anthropic.claude.usercontent.sandbox.OpenExternal":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.OpenExternal"),payload:o.re({"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.OpenExternal"),href:o.Yj()})}),responseSchema:r.gq,alwaysPermitted:!0},"anthropic.claude.usercontent.sandbox.DownloadFile":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.DownloadFile"),payload:o.re({"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.DownloadFile"),filename:o.Yj(),data:o.Nl(ArrayBuffer),mimeType:o.Yj()})}),responseSchema:r.gq,alwaysPermitted:!0},"anthropic.claude.usercontent.sandbox.TrackInteraction":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.TrackInteraction"),payload:o.re({"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.TrackInteraction"),interactionType:o.eu("click")})}),responseSchema:r.gq,alwaysPermitted:!0},"anthropic.claude.usercontent.sandbox.ProxyFetch":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.ProxyFetch"),payload:o.re({"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.ProxyFetchRequest"),url:o.Yj(),method:o.Yj(),headers:o.g1(o.Yj()),body:o.Nl(ArrayBuffer).nullable(),channelId:o.Yj()})}),responseSchema:r.Ko.extend({payload:o.re({"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.ProxyFetchResponse"),status:o.ai(),statusText:o.Yj(),headers:o.g1(o.Yj())})}),alwaysPermitted:!1},"anthropic.claude.usercontent.sandbox.ProxyFetchStream":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.ProxyFetchStream"),payload:o.re({"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.ProxyFetchStreamRequest"),channelId:o.Yj(),chunk:o.Nl(ArrayBuffer).nullable(),done:o.zM(),error:o.Yj().optional()})}),responseSchema:r.gq,alwaysPermitted:!1},"anthropic.claude.usercontent.sandbox.GetDOMSnapshot":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.GetDOMSnapshot"),payload:o.re({"@type":o.eu("type.googleapis.com/google.protobuf.Empty")})}),responseSchema:r.Ko.extend({payload:o.re({"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.GetDOMSnapshotResponse"),domSnapshot:o.Yj().nullable()})}),alwaysPermitted:!1},"anthropic.claude.usercontent.sandbox.DOMContentLoaded":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.DOMContentLoaded"),payload:o.re({"@type":o.eu("type.googleapis.com/google.protobuf.Empty")})}),responseSchema:r.gq,alwaysPermitted:!0},"anthropic.claude.usercontent.sandbox.StorageGet":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.StorageGet"),payload:o.re({key:o.Yj(),shared:o.zM().optional().default(!1),"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.StorageGetRequest")})}),responseSchema:r.Ko.extend({payload:o.re({key:o.Yj(),value:o.Yj(),shared:o.zM(),"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.StorageGetResponse")}).nullable()}),alwaysPermitted:!1},"anthropic.claude.usercontent.sandbox.StorageSet":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.StorageSet"),payload:o.re({key:o.Yj(),value:o.Yj(),shared:o.zM().optional().default(!1),"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.StorageSetRequest")})}),responseSchema:r.Ko.extend({payload:o.re({key:o.Yj(),value:o.Yj(),shared:o.zM(),"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.StorageSetResponse")})}),alwaysPermitted:!1},"anthropic.claude.usercontent.sandbox.StorageDelete":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.StorageDelete"),payload:o.re({key:o.Yj(),shared:o.zM().optional().default(!1),"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.StorageDeleteRequest")})}),responseSchema:r.Ko.extend({payload:o.re({key:o.Yj(),deleted:o.zM(),shared:o.zM(),"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.StorageDeleteResponse")})}),alwaysPermitted:!1},"anthropic.claude.usercontent.sandbox.StorageList":{requestSchema:r.Uq.extend({method:o.eu("anthropic.claude.usercontent.sandbox.StorageList"),payload:o.re({prefix:o.Yj().optional(),shared:o.zM().optional().default(!1),"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.StorageListRequest")})}),responseSchema:r.Ko.extend({payload:o.re({keys:o.YO(o.Yj()),prefix:o.Yj().nullable().optional(),shared:o.zM(),"@type":o.eu("type.googleapis.com/anthropic.claude.usercontent.sandbox.StorageListResponse")})}),alwaysPermitted:!1}},g=o.k5(["anthropic.claude.usercontent.sandbox.ReadyForContent","anthropic.claude.usercontent.sandbox.GetFile","anthropic.claude.usercontent.sandbox.SendConversationMessage","anthropic.claude.usercontent.sandbox.ClaudeCompletion","anthropic.claude.usercontent.sandbox.ReportError","anthropic.claude.usercontent.sandbox.BroadcastContentSize","anthropic.claude.usercontent.sandbox.OpenExternal","anthropic.claude.usercontent.sandbox.DownloadFile","anthropic.claude.usercontent.sandbox.TrackInteraction","anthropic.claude.usercontent.sandbox.ProxyFetch","anthropic.claude.usercontent.sandbox.DOMContentLoaded","anthropic.claude.usercontent.sandbox.StorageGet","anthropic.claude.usercontent.sandbox.StorageSet","anthropic.claude.usercontent.sandbox.StorageDelete","anthropic.claude.usercontent.sandbox.StorageList"]),y=o.gM("method",[x["anthropic.claude.usercontent.sandbox.ReadyForContent"].requestSchema,x["anthropic.claude.usercontent.sandbox.GetFile"].requestSchema,x["anthropic.claude.usercontent.sandbox.SendConversationMessage"].requestSchema,x["anthropic.claude.usercontent.sandbox.ClaudeCompletion"].requestSchema,x["anthropic.claude.usercontent.sandbox.ReportError"].requestSchema,x["anthropic.claude.usercontent.sandbox.BroadcastContentSize"].requestSchema,x["anthropic.claude.usercontent.sandbox.OpenExternal"].requestSchema,x["anthropic.claude.usercontent.sandbox.DownloadFile"].requestSchema,x["anthropic.claude.usercontent.sandbox.TrackInteraction"].requestSchema,x["anthropic.claude.usercontent.sandbox.ProxyFetch"].requestSchema,x["anthropic.claude.usercontent.sandbox.DOMContentLoaded"].requestSchema,x["anthropic.claude.usercontent.sandbox.StorageGet"].requestSchema,x["anthropic.claude.usercontent.sandbox.StorageSet"].requestSchema,x["anthropic.claude.usercontent.sandbox.StorageDelete"].requestSchema,x["anthropic.claude.usercontent.sandbox.StorageList"].requestSchema]);o.KC([r.gq,x["anthropic.claude.usercontent.sandbox.GetFile"].responseSchema,x["anthropic.claude.usercontent.sandbox.SendConversationMessage"].responseSchema,x["anthropic.claude.usercontent.sandbox.ClaudeCompletion"].responseSchema,x["anthropic.claude.usercontent.sandbox.ProxyFetch"].responseSchema,x["anthropic.claude.usercontent.sandbox.StorageGet"].responseSchema,x["anthropic.claude.usercontent.sandbox.StorageSet"].responseSchema,x["anthropic.claude.usercontent.sandbox.StorageDelete"].responseSchema,x["anthropic.claude.usercontent.sandbox.StorageList"].responseSchema]),o.k5(["anthropic.claude.usercontent.sandbox.SetContent","anthropic.claude.usercontent.sandbox.RunCode","anthropic.claude.usercontent.sandbox.GetScreenshot","anthropic.claude.usercontent.sandbox.CopyHtmlContent","anthropic.claude.usercontent.sandbox.ProxyFetchStream","anthropic.claude.usercontent.sandbox.GetDOMSnapshot"]),o.gM("method",[x["anthropic.claude.usercontent.sandbox.SetContent"].requestSchema,x["anthropic.claude.usercontent.sandbox.RunCode"].requestSchema,x["anthropic.claude.usercontent.sandbox.GetScreenshot"].requestSchema,x["anthropic.claude.usercontent.sandbox.CopyHtmlContent"].requestSchema,x["anthropic.claude.usercontent.sandbox.ProxyFetchStream"].requestSchema,x["anthropic.claude.usercontent.sandbox.GetDOMSnapshot"].requestSchema]);let b=o.KC([x["anthropic.claude.usercontent.sandbox.SetContent"].responseSchema,x["anthropic.claude.usercontent.sandbox.RunCode"].responseSchema,x["anthropic.claude.usercontent.sandbox.GetScreenshot"].responseSchema,x["anthropic.claude.usercontent.sandbox.CopyHtmlContent"].responseSchema,x["anthropic.claude.usercontent.sandbox.ProxyFetchStream"].responseSchema,x["anthropic.claude.usercontent.sandbox.GetDOMSnapshot"].responseSchema]),f=Object.entries(x).filter(e=>{let[t,n]=e;return!0===n.alwaysPermitted}).map(e=>{let[t,n]=e;return t})},0x1b643ff5e:(e,t,n)=>{n.d(t,{Y:()=>a});let a=e=>{if(e.input&&Object.keys(e.input).length>0)return e.input;if(e.partial_json){let t={};try{t=function(e){let t=function(e){let t=[],n=0;for(;n<e.length;){let a=e[n];if(/\s/.test(a)){n++;continue}if("{[]}:,".includes(a)){t.push(a),n++;continue}if('"'===a){let o=a;n++;let r=!1,s=!1;for(;n<e.length;){if(o+=a=e[n],'"'===a&&!r){s=!0;break}r="\\"===a&&!r,n++}if(!s){if(o.slice(-5).includes("\\"))for(o=o.slice(0,o.lastIndexOf("\\"));o.endsWith("\\");)o=o.slice(0,-1);o+='"'}t.push(o),n++;continue}if(/[-0-9]/.test(a)){let a="";for(;n<e.length&&/[-0-9.eE+]/.test(e[n]);)a+=e[n],n++;if(!a.match(/\d$/))for(;a.length>0&&!a[a.length-1].match(/\d/);)a=a.slice(0,-1);t.push(a);continue}if(/[tfn]/.test(a)){let o="",r=["true","false","null"],s=r.filter(e=>e.startsWith(a));if(1===s.length)n+=(o=s[0]).length;else for(;n<e.length&&/[a-z]/.test(e[n])&&(o+=e[n],n++,!r.includes(o)););r.includes(o)&&t.push(o);continue}n++}return t}(e),n=[];for(let e of t)"{"===e||"["===e?n.push("{"===e?"}":"]"):("}"===e||"]"===e)&&n.length>0&&n.pop();n.reverse(),","===t[t.length-1]&&t.pop();let a=t.concat(n).join("");if(""===a)return null;try{return JSON.parse(a)}catch(a){let e=Math.max(t.lastIndexOf(","),t.lastIndexOf("{"),t.lastIndexOf("["));if(-1!==e){let a=t.slice(0,e+1);return","===a[a.length-1]&&a.pop(),JSON.parse(a.concat(n).join(""))}throw Error("Invalid JSON")}}(e.partial_json)}catch(e){}return null!=t?t:{}}return{}}},0x24fcf6beb:(e,t,n)=>{n.d(t,{$1:()=>l,EJ:()=>d,IO:()=>C,K1:()=>E,K5:()=>x,Tm:()=>_,Uv:()=>f,Xz:()=>D,Ys:()=>p,_o:()=>b,eg:()=>y,it:()=>O,mL:()=>u,oE:()=>h,oj:()=>P,qK:()=>c,vU:()=>s,zI:()=>I});var a=n(0x156c4e43b),o=n(0x1de4b2c21),r=n(0x1b643ff5e),s=function(e){return e.Text="text/plain",e.Markdown="text/markdown",e.Html="text/html",e.Code="application/vnd.ant.code",e.Svg="image/svg+xml",e.Mermaid="application/vnd.ant.mermaid",e.React="application/vnd.ant.react",e}({}),c=function(e){return e.Pdf="application/pdf",e.Excel="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",e.ExcelLegacy="application/vnd.ms-excel",e.Word="application/vnd.openxmlformats-officedocument.wordprocessingml.document",e.WordLegacy="application/msword",e.PowerPoint="application/vnd.openxmlformats-officedocument.presentationml.presentation",e.PowerPointLegacy="application/vnd.ms-powerpoint",e.Csv="text/csv",e.Tsv="text/tab-separated-values",e.Skill="application/vnd.ant.skill",e}({});function d(e){return["application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint"].includes(e)}function l(e){return["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(e)}function p(e,t){var n;let a=(null==(n=e.split(".").pop())?void 0:n.toLowerCase())||"";return!b.includes(a)&&(!t||!(d(t)||l(t))&&"application/pdf"!==t)}let i=new Map([["html","text/html"],["htm","text/html"],["svg","image/svg+xml"],["tsx","application/vnd.ant.react"],["jsx","application/vnd.ant.react"],["mermaid","application/vnd.ant.mermaid"],["mmd","application/vnd.ant.mermaid"],["md","text/markdown"],["markdown","text/markdown"],["pdf","application/pdf"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["doc","application/msword"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["ppt","application/vnd.ms-powerpoint"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xls","application/vnd.ms-excel"],["csv","text/csv"],["tsv","text/tab-separated-values"],["skill","application/vnd.ant.skill"]]);function u(e,t){var n;if("mermaid"===t)return"application/vnd.ant.mermaid";if("markdown"===t)return"text/markdown";if("skill"===t)return"application/vnd.ant.skill";let a=null==(n=e.split(".").pop())?void 0:n.toLowerCase();if(a)return i.get(a)}let m=a.Yj().nullish().transform(e=>null!=e?e:void 0),h=a.Ik({version_uuid:m,command:a.k5(["create","update","rewrite"]).optional().catch(void 0),id:m,title:m,type:a.fc(s).optional().catch(void 0),language:m,content:m,old_str:m,new_str:m,source:a.k5(["c","w"]).optional().catch(void 0),md_citations:a.L5()}),x={"text/plain":{syntaxName:"plaintext",extension:()=>"txt"},"text/markdown":{syntaxName:"markdown",extension:()=>"md"},"text/html":{syntaxName:"html",extension:()=>"html"},"image/svg+xml":{syntaxName:"svg",extension:()=>"svg"},"application/vnd.ant.code":{syntaxName:"plaintext",extension:e=>{switch(null==e?void 0:e.language){case"python":return"py";case"javascript":return"js";case"typescript":return"ts";case"java":return"java";case"csharp":return"cs";case"go":return"go";case"rust":return"rs";case"ruby":return"rb";case"php":return"php";case"swift":return"swift";case"kotlin":return"kt";case"dart":return"dart";case"scala":return"scala";case"perl":return"pl";case"elixir":return"ex";case"haskell":return"hs";case"clojure":return"clj";case"r":return"r";case"groovy":return"groovy";case"bash":return"sh";case"css":return"css";case"scss":return"scss";case"less":return"less";case"sql":return"sql";case"graphql":return"graphql";case"json":return"json";case"html":return"html";default:return"txt"}}},"application/vnd.ant.mermaid":{syntaxName:"mermaid",extension:()=>"mermaid"},"application/vnd.ant.react":{syntaxName:"tsx",extension:()=>"tsx"}},g={"application/pdf":{syntaxName:"pdf",extension:()=>"pdf"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{syntaxName:"xlsx",extension:()=>"xlsx"},"application/vnd.ms-excel":{syntaxName:"xls",extension:()=>"xls"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{syntaxName:"docx",extension:()=>"docx"},"application/msword":{syntaxName:"doc",extension:()=>"doc"},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{syntaxName:"pptx",extension:()=>"pptx"},"application/vnd.ms-powerpoint":{syntaxName:"ppt",extension:()=>"ppt"},"text/csv":{syntaxName:"csv",extension:()=>"csv"},"text/tab-separated-values":{syntaxName:"tsv",extension:()=>"tsv"},"application/vnd.ant.skill":{syntaxName:"skill",extension:()=>"skill"}},y=e=>{let t=x[e.type];return"application/vnd.ant.code"!==e.type?t.extension():t.extension(e)},b=["png","jpg","jpeg","gif","bmp","webp"],f=["python","javascript","typescript","java","csharp","go","rust","ruby","php","swift","kotlin","dart","scala","perl","elixir","haskell","clojure","r","groovy","bash","css","scss","less","sql","graphql","json","html","plaintext"],S=["4th","ada","adb","adoc","ads","agda","applescript","asciidoc","asm","astro","atom","awk","babelrc","bash","bat","bazel","bib","BUILD","bzl","c","c++","cabal","cbl","cc","cfg","clj","cljc","cljs","cls","cmake","cmd","cob","conf","config","coq","cpp","cr","csh","csproj","csv","cxx","d","dart","db","di","diff","dockerignore","dtx","editorconfig","edn","eex","el","elm","env","erl","eslintrc","ex","exs","f","f03","f08","f90","f95","fish","for","forth","fs","fsi","fsproj","fst","fsx","fth","gd","gdscript","gitattributes","gitignore","gradle","gs","h","h++","hpp","hrl","hs","hxx","idr","ini","ins","jl","jsonl","jsx","ksh","kt","kts","lean","lhs","lisp","log","lsp","lua","m","mak","make","mdx","mix","mk","ml","mli","mm","mysql","ndjson","nim","nims","ninja","npmignore","nuspec","opam","org","P","pas","patch","pgsql","pl","plpgsql","plsql","pm","pod","pp","prettierrc","pro","properties","ps1","psd1","psm1","pubspec","purs","rdoc","rebar","rej","rkt","rss","rst","S","s","sc","scala","scm","scpt","sed","sh","sig","skill","sln","smalltalk","sml","sqlite","st","sty","sv","svelte","svg","t","tcl","tcsh","tex","toml","tsv","v","vb","vbproj","vbs","vcxproj","vhd","vhdl","vim","vimrc","vlang","vue","wast","wat","xml","yaml","yml","zig","zsh"],v=["dockerfile","docker-compose","containerfile","makefile","rakefile","jenkinsfile","vagrantfile","gemfile","pipfile","go.mod","go.sum","yarn.lock"],q=["mmd"];function C(e){var t,n;let a=(null==(t=e.split(".").pop())?void 0:t.toLowerCase())||"",o=(null==(n=e.split("/").pop())?void 0:n.toLowerCase())||"";for(let[e,t]of Object.entries(x))if("application/vnd.ant.code"!==e&&t.extension()===a)return!0;for(let e of Object.values(g))if(e.extension()===a)return!0;if(b.includes(a))return!0;let r=x["application/vnd.ant.code"].extension;for(let e of f)if(r({language:e})===a)return!0;return!!(q.includes(a)||S.includes(a)||v.includes(o)||v.some(e=>o.startsWith("".concat(e,"."))))}let w="antArtifact",j="<".concat(w,"(?:\\s+([^>]*)>|(?!>)\\S*)"),k="</".concat(w,">"),Y=RegExp("".concat(j,"([\\s\\S]*?)(?:").concat(k,"|$)"),"g"),R=RegExp("<(?:a(?:n(?:t(?:A(?:r(?:t(?:i(?:f(?:a(?:c(?:t)?)?)?)?)?)?)?)?)?)?)?$","gm"),M=RegExp("".concat(j,"[\\s\\S]*?(?:").concat(k,"|$)"),"g"),P="ANTARTIFACTLINK";function E(e){var t;let n=e.match(/identifier="([^"]*)"/),a=n?n[1]:"",o=e.match(/type="([^"]*)"/),r=o?(t=o[1],Object.values(s).includes(t)?t:"text/plain"):"text/plain",c=e.match(/title="([^"]*)"/),d=c?c[1]:"Untitled artifact",l=e.match(/language="([^"]*)"/),p=l?l[1]:void 0,i=e.match(/isClosed="(true|false)"/);return{id:a,type:r,title:d,language:p,isClosed:i?"true"===i[1]:void 0}}function F(e){return e.replace(R,"")}function O(e){return L(F(e)).replace(Y,(e,t,n)=>{if(!t||"string"!=typeof t)return"";{let{type:e,language:a}=E(t);return"text/markdown"!==e&&"string"==typeof n?"```".concat(a||x[e].syntaxName,"\n").concat(n.trimStart(),"\n```"):"\n".concat(n)}})}function _(e){return F(L(e).replace(M,(e,t)=>{let n=e.endsWith(k);return"<".concat(P," ").concat(t," isClosed=“").concat(n,"” />")}))}let I=(e,t)=>"create"===e.command||"rewrite"===e.command?e.content:"update"===e.command?void 0===t?e.new_str:t.includes(e.old_str)?t.replace(e.old_str,e.new_str):t.replace(e.old_str.trim(),e.new_str):null!=t?t:"";function D(e){var t;let n=(0,o.C)(e).matchAll(Y),a=[];for(let t of n){let[n,o,r]=t,s=n.endsWith(k);if(!o||!r)continue;let{id:c,type:d,title:l,language:p}=E(o),i={command:"create",message:e.uuid||"",created_at:e.created_at,content:r.trimStart(),isClosed:s};a.push({id:c,currentVersion:i,type:d,title:l,language:p})}return null==(t=e.content)||t.map((t,n,o)=>{if("tool_use"===t.type&&"artifacts"===t.name&&t.input){let s,c=(0,r.Y)(t),d=n===o.length-1,{version_uuid:l,command:p,id:i,type:u="text/plain",title:m="",language:x,content:g="",old_str:y="",new_str:b="",md_citations:f,source:S}=h.parse(c),v=(null==f?void 0:f.length)?g:g.trimStart();"create"===p||"rewrite"===p?s={uuid:l,command:p,citations:f,content:v,message:e.uuid||"",created_at:e.created_at,isClosed:!d,source:S}:"update"===p&&""!==g?s={uuid:l,command:"rewrite",message:e.uuid||"",created_at:e.created_at,isClosed:!d,content:g}:"update"===p&&(s={uuid:l,command:"update",message:e.uuid||"",created_at:e.created_at,isClosed:!d,old_str:y,new_str:b}),void 0!==i&&void 0!==s&&a.push({id:i,currentVersion:s,type:u,title:m,language:x})}}),a}let G="antThinking",N="<".concat(G,">"),z=RegExp("".concat(N,"[\\s\\S]*?(?:</").concat(G,">|$)"),"g"),U=RegExp("<(?:a(?:n(?:t(?:T(?:h(?:i(?:n(?:k(?:i(?:n(?:g)?)?)?)?)?)?)?)?)?)?)?$","gm");function L(e){let t=e.replace(U,"");return t.replace(z,"")}}}]);